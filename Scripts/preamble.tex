% !TEX TS-program = xelatex
% !TEX encoding = UTF-8 Unicode

% Language and font management
\usepackage{babel}  % Multi-language support
\usepackage{fontspec}  % Font management
\usepackage{microtype}  % For better typography

% Page layout and geometry
\usepackage{geometry}
\geometry{left=1in, right=1in, top=1in, bottom=1in}

% Line spacing and titles
\usepackage{setspace}
\onehalfspacing  % Use one-and-a-half line spacing
\usepackage{titlesec}  % Title formatting
\titleformat{\section}[block]{\Large\bfseries\centering}{\thesection}{1em}{}

% Header and footer setup
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead[L]{}  % Left header (empty)
\fancyhead[C]{Rmarkdown Template File}  % Centered header
\fancyhead[R]{}  % Right header (empty)
\fancyfoot[L]{}  % Left footer (empty)
\fancyfoot[C]{\thepage}  % Centered page number
\fancyfoot[R]{}  % Right footer (empty)

% Math and symbols
\usepackage{amsmath}  % For math support
\usepackage{amssymb}  % For extra math symbols

% Hyperlink and references setup
\definecolor{urbnblue}{HTML}{1696D2}    % Defines the blue color
\usepackage{hyperref}  % Hyperlinks and references
\hypersetup{breaklinks=true,
            bookmarks=true,
            pdfauthor={Dellinger, Robert J.},
            pdftitle={Rmarkdown Template File},
            colorlinks=true,
            citecolor=blue,
            urlcolor=blue,
            linkcolor=magenta,
            pdfborder={0 0 0}}

% Listings for code formatting (R code)
\usepackage{listings}
\usepackage{xcolor}  % For color customization
\lstdefinestyle{RStyle}{
  language=R,                         % Set the language to R
  basicstyle=\small\ttfamily,          % Use small size and monospaced font
  backgroundcolor=\color{white},      % Set background color
  showspaces=false,                   % Do not display spaces with underscores
  showstringspaces=false,             % Do not underline spaces in strings
  showtabs=false,                     % Do not display tabs with arrows
  tabsize=2,                          % Set tab size to 2 spaces
  breaklines=true,                    % Enable line breaking
  breakatwhitespace=true,            % Break lines at whitespace
  commentstyle=\color{urbnblue},          % Style for comments
  keywordstyle=\color{black},          % Style for keywords
  stringstyle=\color{black}           % Style for strings
}
\lstset{style=RStyle}

% Fancy verbatim (improve code formatting)
\usepackage{fancyvrb}
\usepackage{fvextra}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{
    breaklines=true,
    breakanywhere=true,
    commandchars=\\\{\},
    fontsize=\small
}

% Adding line breaks to hash environment
\usepackage{seqsplit}
\renewcommand{\texttt}[1]{{\ttfamily\seqsplit{#1}}}

%% document formatting
 % colors for tables and text
\usepackage{ragged2e} % justifying text
\usepackage{setspace} % spacing commands, automatically makes captions single-spaced
  \setstretch{1.5} \frenchspacing
\usepackage{lastpage} % access number of last page for numbering in margin

%% fonts setup
\usepackage{libertine}
\usepackage{gensymb} %degree symbol

\usepackage{array}
\usepackage{multirow}
\usepackage[table]{xcolor}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage{makecell}

\usepackage[hang]{footmisc}

% Tables and long tables
\usepackage{longtable,booktabs}
% \setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
\setlength{\emergencystretch}{3em}  % prevent overfull lines

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}
